(function(){var x=function(j,k){var l=1,LINK=2,PREVIEW=4,CLEANUP=8,regexGetSize=/^\s*(\d+)((px)|\%)?\s*$/i,regexGetSizeOrEmpty=/(^\s*(\d+)((px)|\%)?\s*$)|^$/i,pxLengthRegex=/^\d+px$/;var m=function(){var a=this.getValue(),dialog=this.getDialog(),aMatch=a.match(regexGetSize);if(aMatch){if(aMatch[2]=='%')q(dialog,false);a=aMatch[1]}if(dialog.lockRatio){var b=dialog.originalElement;if(b.getCustomData('isReady')=='true'){if(this.id=='txtHeight'){if(a&&a!='0')a=Math.round(b.$.width*(a/b.$.height));if(!isNaN(a))dialog.setValueOf('info','txtWidth',a)}else{if(a&&a!='0')a=Math.round(b.$.height*(a/b.$.width));if(!isNaN(a))dialog.setValueOf('info','txtHeight',a)}}}o(dialog)};var n=function(a,b){if(b=='onOk'){var c=a.getValueOf('info','txtWidth');var d=a.getValueOf('info','txtHeight');var e='/'+c+'-'+d+'/';var f=a.getValueOf('info','txtUrl');if(f.search(/\/[0-9]+-[0-9]+\//)!=-1){f=f.replace(/\/[0-9]+-[0-9]+\//,e)}else{var g=f.search(/\/[0-9]+\//);var h=f.match(/\/[0-9]+\//);var i=f.substring(g+h[0].length);var f=f.substring(0,g)+h+e.substring(1)+i}};if(b=='onResetSize'){var f=a.getValueOf('info','txtUrl');if(f.search(/\/[0-9]+-[0-9]+/)!=-1){f=f.replace(/\/[0-9]+-[0-9]+/,'')}else{return false}};a.setValueOf('info','txtUrl',f)};var o=function(a){if(!a.originalElement||!a.preview)return 1;a.commitContent(PREVIEW,a.preview);return 0};function commitContent(){var b=arguments;var c=this.getContentElement('advanced','txtdlgGenStyle');c&&c.commit.apply(c,b);this.foreach(function(a){if(a.commit&&a.id!='txtdlgGenStyle')a.commit.apply(a,b)})}var p;function commitInternally(a){if(p)return;p=1;var b=this.getDialog(),element=b.imageElement;if(element){this.commit(l,element);a=[].concat(a);var c=a.length,field;for(var i=0;i<c;i++){field=b.getContentElement.apply(b,a[i].split(':'));field&&field.setup(l,element)}}p=0}var q=function(a,b){if(!a.getContentElement('info','ratioLock'))return null;var c=a.originalElement;if(!c)return null;if(b=='check'){if(!a.userlockRatio&&c.getCustomData('isReady')=='true'){var d=a.getValueOf('info','txtWidth'),height=a.getValueOf('info','txtHeight'),originalRatio=c.$.width*1000/c.$.height,thisRatio=d*1000/height;a.lockRatio=false;if(!d&&!height)a.lockRatio=true;else if(!isNaN(originalRatio)&&!isNaN(thisRatio)){if(Math.round(originalRatio)==Math.round(thisRatio))a.lockRatio=true}}}else if(b!=undefined)a.lockRatio=b;else{a.userlockRatio=1;a.lockRatio=!a.lockRatio}var e=CKEDITOR.document.getById(btnLockSizesId);if(a.lockRatio)e.removeClass('cke_btn_unlocked');else e.addClass('cke_btn_unlocked');e.setAttribute('aria-checked',a.lockRatio);if(CKEDITOR.env.hc){var f=e.getChild(0);f.setHtml(a.lockRatio?CKEDITOR.env.ie?'\u25A0':'\u25A3':CKEDITOR.env.ie?'\u25A1':'\u25A2')}return a.lockRatio};var r=function(a){n(a,'onResetSize');var b=a.originalElement;if(b.getCustomData('isReady')=='true'){var c=a.getContentElement('info','txtWidth'),heightField=a.getContentElement('info','txtHeight');c&&c.setValue(b.$.width);heightField&&heightField.setValue(b.$.height)}o(a)};var s=function(d,e){if(d!=l)return;function checkDimension(a,b){var c=a.match(regexGetSize);if(c){if(c[2]=='%'){c[1]+='%';q(f,false)}return c[1]}return b}var f=this.getDialog(),value='',dimension=this.id=='txtWidth'?'width':'height',size=e.getAttribute(dimension);if(size)value=checkDimension(size,value);value=checkDimension(e.getStyle(dimension),value);this.setValue(value)};var t;var u=function(){var a=this.originalElement;a.setCustomData('isReady','true');a.removeListener('load',u);a.removeListener('error',v);a.removeListener('abort',v);CKEDITOR.document.getById(imagePreviewLoaderId).setStyle('display','none');if(!this.dontResetSize)r(this);if(this.firstLoad)CKEDITOR.tools.setTimeout(function(){q(this,'check')},0,this);this.firstLoad=false;this.dontResetSize=false};var v=function(){var a=this.originalElement;a.removeListener('load',u);a.removeListener('error',v);a.removeListener('abort',v);var b=CKEDITOR.getUrl(j.skinPath+'images/noimage.png');if(this.preview)this.preview.setAttribute('src',b);CKEDITOR.document.getById(imagePreviewLoaderId).setStyle('display','none');q(this,false)};var w=function(a){return CKEDITOR.tools.getNextId()+'_'+a},btnLockSizesId=w('btnLockSizes'),btnResetSizeId=w('btnResetSize'),imagePreviewLoaderId=w('ImagePreviewLoader'),imagePreviewBoxId=w('ImagePreviewBox'),previewLinkId=w('previewLink'),previewImageId=w('previewImage');return{title:j.lang.image[k=='image'?'title':'titleButton'],minWidth:420,minHeight:360,onShow:function(){this.imageElement=false;this.linkElement=false;this.imageEditMode=false;this.linkEditMode=false;this.lockRatio=true;this.userlockRatio=0;this.dontResetSize=false;this.firstLoad=true;this.addLink=false;var a=this.getParentEditor(),sel=this.getParentEditor().getSelection(),element=sel.getSelectedElement(),link=element&&element.getAscendant('a');CKEDITOR.document.getById(imagePreviewLoaderId).setStyle('display','none');t=new CKEDITOR.dom.element('img',a.document);this.preview=CKEDITOR.document.getById(previewImageId);this.originalElement=a.document.createElement('img');this.originalElement.setAttribute('alt','');this.originalElement.setCustomData('isReady','false');if(link){this.linkElement=link;this.linkEditMode=true;var b=link.getChildren();if(b.count()==1){var c=b.getItem(0).getName();if(c=='img'||c=='input'){this.imageElement=b.getItem(0);if(this.imageElement.getName()=='img')this.imageEditMode='img';else if(this.imageElement.getName()=='input')this.imageEditMode='input'}}if(k=='image')this.setupContent(LINK,link)}if(element&&element.getName()=='img'&&!element.data('cke-realelement')||element&&element.getName()=='input'&&element.getAttribute('type')=='image'){this.imageEditMode=element.getName();this.imageElement=element}if(this.imageEditMode){this.cleanImageElement=this.imageElement;this.imageElement=this.cleanImageElement.clone(true,true);this.setupContent(l,this.imageElement)}else this.imageElement=a.document.createElement('img');q(this,true);if(!CKEDITOR.tools.trim(this.getValueOf('info','txtUrl'))){this.preview.removeAttribute('src');this.preview.setStyle('display','none')}},onOk:function(){n(this,'onOk');if(this.imageEditMode){var a=this.imageEditMode;if(k=='image'&&a=='input'&&confirm(j.lang.image.button2Img)){a='img';this.imageElement=j.document.createElement('img');this.imageElement.setAttribute('alt','');j.insertElement(this.imageElement)}else if(k!='image'&&a=='img'&&confirm(j.lang.image.img2Button)){a='input';this.imageElement=j.document.createElement('input');this.imageElement.setAttributes({type:'image',alt:''});j.insertElement(this.imageElement)}else{this.imageElement=this.cleanImageElement;delete this.cleanImageElement}}else{if(k=='image')this.imageElement=j.document.createElement('img');else{this.imageElement=j.document.createElement('input');this.imageElement.setAttribute('type','image')}this.imageElement.setAttribute('alt','')}if(!this.linkEditMode)this.linkElement=j.document.createElement('a');this.commitContent(l,this.imageElement);this.commitContent(LINK,this.linkElement);if(!this.imageElement.getAttribute('style'))this.imageElement.removeAttribute('style');if(!this.imageEditMode){if(this.addLink){if(!this.linkEditMode){j.insertElement(this.linkElement);this.linkElement.append(this.imageElement,false)}else j.insertElement(this.imageElement)}else j.insertElement(this.imageElement)}else{if(!this.linkEditMode&&this.addLink){j.insertElement(this.linkElement);this.imageElement.appendTo(this.linkElement)}else if(this.linkEditMode&&!this.addLink){j.getSelection().selectElement(this.linkElement);j.insertElement(this.imageElement)}}},onLoad:function(){if(k!='image')this.hidePage('Link');var a=this._.element.getDocument();if(this.getContentElement('info','ratioLock')){this.addFocusable(a.getById(btnResetSizeId),5);this.addFocusable(a.getById(btnLockSizesId),5)}this.commitContent=commitContent},onHide:function(){if(this.preview)this.commitContent(CLEANUP,this.preview);if(this.originalElement){this.originalElement.removeListener('load',u);this.originalElement.removeListener('error',v);this.originalElement.removeListener('abort',v);this.originalElement.remove();this.originalElement=false}delete this.imageElement},contents:[{id:'info',label:j.lang.image.infoTab,accessKey:'I',elements:[{type:'vbox',padding:0,children:[{type:'hbox',widths:['320px','80px'],align:'right',children:[{id:'txtUrl',type:'text',label:j.lang.common.url,required:true,onChange:function(){var a=this.getDialog(),newUrl=this.getValue();if(newUrl.length>0){a=this.getDialog();var b=a.originalElement;a.preview.removeStyle('display');b.setCustomData('isReady','false');var c=CKEDITOR.document.getById(imagePreviewLoaderId);if(c)c.setStyle('display','');b.on('load',u,a);b.on('error',v,a);b.on('abort',v,a);b.setAttribute('src',newUrl);t.setAttribute('src',newUrl);a.preview.setAttribute('src',t.$.src);o(a)}else if(a.preview){a.preview.removeAttribute('src');a.preview.setStyle('display','none')}},setup:function(a,b){if(a==l){var c=b.data('cke-saved-src')||b.getAttribute('src');var d=this;this.getDialog().dontResetSize=true;d.setValue(c);d.setInitValue()}},commit:function(a,b){if(a==l&&(this.getValue()||this.isChanged())){b.data('cke-saved-src',this.getValue());b.setAttribute('src',this.getValue())}else if(a==CLEANUP){b.setAttribute('src','');b.removeAttribute('src')}},validate:CKEDITOR.dialog.validate.notEmpty(j.lang.image.urlMissing)},{type:'button',id:'browse',style:'display:inline-block;margin-top:10px;',align:'center',label:j.lang.esp_image.browseServer,hidden:true,filebrowser:{action:'Browse',target:'info:txtUrl',url:j.config.filebrowserImageBrowseUrl}}]}]},{id:'txtAlt',type:'text',label:j.lang.image.alt,accessKey:'T','default':'',onChange:function(){o(this.getDialog())},setup:function(a,b){if(a==l)this.setValue(b.getAttribute('alt'))},commit:function(a,b){if(a==l){if(this.getValue()||this.isChanged())b.setAttribute('alt',this.getValue())}else if(a==PREVIEW){b.setAttribute('alt',this.getValue())}else if(a==CLEANUP){b.removeAttribute('alt')}}},{type:'hbox',children:[{id:'basic',type:'vbox',children:[{type:'hbox',widths:['50%','50%'],children:[{type:'vbox',padding:1,children:[{type:'text',width:'40px',id:'txtWidth',label:j.lang.common.width,onKeyUp:m,onChange:function(){commitInternally.call(this,'advanced:txtdlgGenStyle')},validate:function(){var a=this.getValue().match(regexGetSizeOrEmpty),isValid=!!(a&&parseInt(a[1],10)!==0);if(!isValid)alert(j.lang.common.invalidWidth);return isValid},setup:s,commit:function(a,b,c){var d=this.getValue();if(a==l){if(d)b.setStyle('width',CKEDITOR.tools.cssLength(d));else b.removeStyle('width');!c&&b.removeAttribute('width')}else if(a==PREVIEW){var e=d.match(regexGetSize);if(!e){var f=this.getDialog().originalElement;if(f.getCustomData('isReady')=='true')b.setStyle('width',f.$.width+'px')}else b.setStyle('width',CKEDITOR.tools.cssLength(d))}else if(a==CLEANUP){b.removeAttribute('width');b.removeStyle('width')}}},{type:'text',id:'txtHeight',width:'40px',label:j.lang.common.height,onKeyUp:m,onChange:function(){commitInternally.call(this,'advanced:txtdlgGenStyle')},validate:function(){var a=this.getValue().match(regexGetSizeOrEmpty),isValid=!!(a&&parseInt(a[1],10)!==0);if(!isValid)alert(j.lang.common.invalidHeight);return isValid},setup:s,commit:function(a,b,c){var d=this.getValue();if(a==l){if(d)b.setStyle('height',CKEDITOR.tools.cssLength(d));else b.removeStyle('height');!c&&b.removeAttribute('height')}else if(a==PREVIEW){var e=d.match(regexGetSize);if(!e){var f=this.getDialog().originalElement;if(f.getCustomData('isReady')=='true')b.setStyle('height',f.$.height+'px')}else b.setStyle('height',CKEDITOR.tools.cssLength(d))}else if(a==CLEANUP){b.removeAttribute('height');b.removeStyle('height')}}}]},{id:'ratioLock',type:'html',style:'margin-top:30px;width:40px;height:40px;',onLoad:function(){var d=CKEDITOR.document.getById(btnResetSizeId),ratioButton=CKEDITOR.document.getById(btnLockSizesId);if(d){d.on('click',function(a){r(this);a.data&&a.data.preventDefault()},this.getDialog());d.on('mouseover',function(){this.addClass('cke_btn_over')},d);d.on('mouseout',function(){this.removeClass('cke_btn_over')},d)}if(ratioButton){ratioButton.on('click',function(a){var b=q(this),oImageOriginal=this.originalElement,width=this.getValueOf('info','txtWidth');if(oImageOriginal.getCustomData('isReady')=='true'&&width){var c=oImageOriginal.$.height/oImageOriginal.$.width*width;if(!isNaN(c)){this.setValueOf('info','txtHeight',Math.round(c));o(this)}}a.data&&a.data.preventDefault()},this.getDialog());ratioButton.on('mouseover',function(){this.addClass('cke_btn_over')},ratioButton);ratioButton.on('mouseout',function(){this.removeClass('cke_btn_over')},ratioButton)}},html:'<div>'+'<a href="javascript:void(0)" tabindex="-1" title="'+j.lang.image.lockRatio+'" class="cke_btn_locked" id="'+btnLockSizesId+'" role="checkbox"><span class="cke_icon"></span><span class="cke_label">'+j.lang.image.lockRatio+'</span></a>'+'<a href="javascript:void(0)" tabindex="-1" title="'+j.lang.image.resetSize+'" class="cke_btn_reset" id="'+btnResetSizeId+'" role="button"><span class="cke_label">'+j.lang.image.resetSize+'</span></a>'+'</div>'}]},{type:'vbox',padding:1,children:[{type:'text',id:'txtBorder',width:'60px',label:j.lang.image.border,'default':'',onKeyUp:function(){o(this.getDialog())},onChange:function(){commitInternally.call(this,'advanced:txtdlgGenStyle')},validate:CKEDITOR.dialog.validate.integer(j.lang.image.validateBorder),setup:function(a,b){if(a==l){var c,borderStyle=b.getStyle('border-width');borderStyle=borderStyle&&borderStyle.match(/^(\d+px)(?: \1 \1 \1)?$/);c=borderStyle&&parseInt(borderStyle[1],10);isNaN(parseInt(c,10))&&(c=b.getAttribute('border'));this.setValue(c)}},commit:function(a,b,c){var d=parseInt(this.getValue(),10);if(a==l||a==PREVIEW){if(!isNaN(d)){b.setStyle('border-width',CKEDITOR.tools.cssLength(d));b.setStyle('border-style','solid')}else if(!d&&this.isChanged()){b.removeStyle('border-width');b.removeStyle('border-style');b.removeStyle('border-color')}if(!c&&a==l)b.removeAttribute('border')}else if(a==CLEANUP){b.removeAttribute('border');b.removeStyle('border-width');b.removeStyle('border-style');b.removeStyle('border-color')}}},{type:'text',id:'txtHSpace',width:'60px',label:j.lang.image.hSpace,'default':'',onKeyUp:function(){o(this.getDialog())},onChange:function(){commitInternally.call(this,'advanced:txtdlgGenStyle')},validate:CKEDITOR.dialog.validate.integer(j.lang.image.validateHSpace),setup:function(a,b){if(a==l){var c,marginLeftPx,marginRightPx,marginLeftStyle=b.getStyle('margin-left'),marginRightStyle=b.getStyle('margin-right');marginLeftStyle=marginLeftStyle&&marginLeftStyle.match(pxLengthRegex);marginRightStyle=marginRightStyle&&marginRightStyle.match(pxLengthRegex);marginLeftPx=parseInt(marginLeftStyle,10);marginRightPx=parseInt(marginRightStyle,10);c=(marginLeftPx==marginRightPx)&&marginLeftPx;isNaN(parseInt(c,10))&&(c=b.getAttribute('hspace'));this.setValue(c)}},commit:function(a,b,c){var d=parseInt(this.getValue(),10);if(a==l||a==PREVIEW){if(!isNaN(d)){b.setStyle('margin-left',CKEDITOR.tools.cssLength(d));b.setStyle('margin-right',CKEDITOR.tools.cssLength(d))}else if(!d&&this.isChanged()){b.removeStyle('margin-left');b.removeStyle('margin-right')}if(!c&&a==l)b.removeAttribute('hspace')}else if(a==CLEANUP){b.removeAttribute('hspace');b.removeStyle('margin-left');b.removeStyle('margin-right')}}},{type:'text',id:'txtVSpace',width:'60px',label:j.lang.image.vSpace,'default':'',onKeyUp:function(){o(this.getDialog())},onChange:function(){commitInternally.call(this,'advanced:txtdlgGenStyle')},validate:CKEDITOR.dialog.validate.integer(j.lang.image.validateVSpace),setup:function(a,b){if(a==l){var c,marginTopPx,marginBottomPx,marginTopStyle=b.getStyle('margin-top'),marginBottomStyle=b.getStyle('margin-bottom');marginTopStyle=marginTopStyle&&marginTopStyle.match(pxLengthRegex);marginBottomStyle=marginBottomStyle&&marginBottomStyle.match(pxLengthRegex);marginTopPx=parseInt(marginTopStyle,10);marginBottomPx=parseInt(marginBottomStyle,10);c=(marginTopPx==marginBottomPx)&&marginTopPx;isNaN(parseInt(c,10))&&(c=b.getAttribute('vspace'));this.setValue(c)}},commit:function(a,b,c){var d=parseInt(this.getValue(),10);if(a==l||a==PREVIEW){if(!isNaN(d)){b.setStyle('margin-top',CKEDITOR.tools.cssLength(d));b.setStyle('margin-bottom',CKEDITOR.tools.cssLength(d))}else if(!d&&this.isChanged()){b.removeStyle('margin-top');b.removeStyle('margin-bottom')}if(!c&&a==l)b.removeAttribute('vspace')}else if(a==CLEANUP){b.removeAttribute('vspace');b.removeStyle('margin-top');b.removeStyle('margin-bottom')}}},{id:'cmbAlign',type:'select',widths:['35%','65%'],style:'width:90px',label:j.lang.common.align,'default':'',items:[[j.lang.common.notSet,''],[j.lang.common.alignLeft,'left'],[j.lang.common.alignRight,'right']],onChange:function(){o(this.getDialog());commitInternally.call(this,'advanced:txtdlgGenStyle')},setup:function(a,b){if(a==l){var c=b.getStyle('float');switch(c){case'inherit':case'none':c=''}!c&&(c=(b.getAttribute('align')||'').toLowerCase());this.setValue(c)}},commit:function(a,b,c){var d=this.getValue();if(a==l||a==PREVIEW){if(d)b.setStyle('float',d);else b.removeStyle('float');if(!c&&a==l){d=(b.getAttribute('align')||'').toLowerCase();switch(d){case'left':case'right':b.removeAttribute('align')}}}else if(a==CLEANUP)b.removeStyle('float')}}]}]},{type:'vbox',height:'250px',children:[{type:'html',id:'htmlPreview',style:'width:95%;',html:'<div>'+CKEDITOR.tools.htmlEncode(j.lang.common.preview)+'<br>'+'<div id="'+imagePreviewLoaderId+'" class="ImagePreviewLoader" style="display:none"><div class="loading">&nbsp;</div></div>'+'<div id="'+imagePreviewBoxId+'" class="ImagePreviewBox"><table><tr><td>'+'<a href="javascript:void(0)" target="_blank" onclick="return false;" id="'+previewLinkId+'">'+'<img id="'+previewImageId+'" alt="" /></a>'+(j.config.image_previewText||'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. '+'Maecenas feugiat consequat diam. Maecenas metus. Vivamus diam purus, cursus a, commodo non, facilisis vitae, '+'nulla. Aenean dictum lacinia tortor. Nunc iaculis, nibh non iaculis aliquam, orci felis euismod neque, sed ornare massa mauris sed velit. Nulla pretium mi et risus. Fusce mi pede, tempor id, cursus ac, ullamcorper nec, enim. Sed tortor. Curabitur molestie. Duis velit augue, condimentum at, ultrices a, luctus ut, orci. Donec pellentesque egestas eros. Integer cursus, augue in cursus faucibus, eros pede bibendum sem, in tempus tellus justo quis ligula. Etiam eget tortor. Vestibulum rutrum, est ut placerat elementum, lectus nisl aliquam velit, tempor aliquam eros nunc nonummy metus. In eros metus, gravida a, gravida sed, lobortis id, turpis. Ut ultrices, ipsum at venenatis fringilla, sem nulla lacinia tellus, eget aliquet turpis mauris non enim. Nam turpis. Suspendisse lacinia. Curabitur ac tortor ut ipsum egestas elementum. Nunc imperdiet gravida mauris.')+'</td></tr></table></div></div>'}]}]}]},{id:'Link',label:j.lang.link.title,padding:0,elements:[{id:'txtUrl',type:'text',label:j.lang.common.url,style:'width: 100%','default':'',setup:function(a,b){if(a==LINK){var c=b.data('cke-saved-href');if(!c)c=b.getAttribute('href');this.setValue(c)}},commit:function(a,b){if(a==LINK){if(this.getValue()||this.isChanged()){var c=decodeURI(this.getValue());b.data('cke-saved-href',c);b.setAttribute('href',c);if(this.getValue()||!j.config.image_removeLinkByEmptyURL)this.getDialog().addLink=true}}}},{type:'button',id:'browse',filebrowser:{action:'Browse',target:'Link:txtUrl',url:j.config.filebrowserImageBrowseUrl},style:'float:right',hidden:true,label:j.lang.esp_image.browseServer},{id:'cmbTarget',type:'select',label:j.lang.common.target,'default':'',items:[[j.lang.common.notSet,''],[j.lang.common.targetNew,'_blank'],[j.lang.common.targetTop,'_top'],[j.lang.common.targetSelf,'_self'],[j.lang.common.targetParent,'_parent']],setup:function(a,b){if(a==LINK)this.setValue(b.getAttribute('target')||'')},commit:function(a,b){if(a==LINK){if(this.getValue()||this.isChanged())b.setAttribute('target',this.getValue())}}}]},{id:'advanced',label:j.lang.common.advancedTab,elements:[{type:'hbox',widths:['50%','25%','25%'],children:[{type:'text',id:'linkId',label:j.lang.common.id,setup:function(a,b){if(a==l)this.setValue(b.getAttribute('id'))},commit:function(a,b){if(a==l){if(this.getValue()||this.isChanged())b.setAttribute('id',this.getValue())}}},{id:'cmbLangDir',type:'select',style:'width : 100px;',label:j.lang.common.langDir,'default':'',items:[[j.lang.common.notSet,''],[j.lang.common.langDirLtr,'ltr'],[j.lang.common.langDirRtl,'rtl']],setup:function(a,b){if(a==l)this.setValue(b.getAttribute('dir'))},commit:function(a,b){if(a==l){if(this.getValue()||this.isChanged())b.setAttribute('dir',this.getValue())}}},{type:'text',id:'txtLangCode',label:j.lang.common.langCode,'default':'',setup:function(a,b){if(a==l)this.setValue(b.getAttribute('lang'))},commit:function(a,b){if(a==l){if(this.getValue()||this.isChanged())b.setAttribute('lang',this.getValue())}}}]},{type:'text',id:'txtGenLongDescr',label:j.lang.common.longDescr,setup:function(a,b){if(a==l)this.setValue(b.getAttribute('longDesc'))},commit:function(a,b){if(a==l){if(this.getValue()||this.isChanged())b.setAttribute('longDesc',this.getValue())}}},{type:'hbox',widths:['50%','50%'],children:[{type:'text',id:'txtGenClass',label:j.lang.common.cssClass,'default':'',setup:function(a,b){if(a==l)this.setValue(b.getAttribute('class'))},commit:function(a,b){if(a==l){if(this.getValue()||this.isChanged())b.setAttribute('class',this.getValue())}}},{type:'text',id:'txtGenTitle',label:j.lang.common.advisoryTitle,'default':'',onChange:function(){o(this.getDialog())},setup:function(a,b){if(a==l)this.setValue(b.getAttribute('title'))},commit:function(a,b){if(a==l){if(this.getValue()||this.isChanged())b.setAttribute('title',this.getValue())}else if(a==PREVIEW){b.setAttribute('title',this.getValue())}else if(a==CLEANUP){b.removeAttribute('title')}}}]},{type:'text',id:'txtdlgGenStyle',label:j.lang.common.cssStyle,validate:CKEDITOR.dialog.validate.inlineStyle(j.lang.common.invalidInlineStyle),'default':'',setup:function(a,b){if(a==l){var c=b.getAttribute('style');if(!c&&b.$.style.cssText)c=b.$.style.cssText;this.setValue(c);var d=b.$.style.height,width=b.$.style.width,aMatchH=(d?d:'').match(regexGetSize),aMatchW=(width?width:'').match(regexGetSize);this.attributesInStyle={height:!!aMatchH,width:!!aMatchW}}},onChange:function(){commitInternally.call(this,['info:cmbFloat','info:cmbAlign','info:txtVSpace','info:txtHSpace','info:txtBorder','info:txtWidth','info:txtHeight']);o(this)},commit:function(a,b){if(a==l&&(this.getValue()||this.isChanged())){b.setAttribute('style',this.getValue())}}}]}]}};CKEDITOR.dialog.add('esp_image',function(a){return x(a,'image')});CKEDITOR.dialog.add('esp_imagebutton',function(a){return x(a,'imagebutton')})})();

